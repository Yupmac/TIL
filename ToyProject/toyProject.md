7/25

드디어 찾아온 자바스크립트 토이프로젝트!

난 아직 아는게 없다고 생각하지만 야속하게도 시간은 흘렀고 이 시간이 오고야 말았다.

모르는 부분 보충하고 시작해야겠다 싶었으나, 사실 만드는거 자체가 공부 아니겠나. 일단 부딪혀보기로 한다.

자, 지금부터 토이프로젝트 그 눈물의 똥꼬쇼가 시작됩니다!

---

7/27

시작부터 난관.

open api 를 받아오긴 했는데 이걸 어떻게 자료화하는지를 몰라서 다시 공부함.

7/29

 

![질문_에러.png](https://github.com/Yupmac/TIL/blob/main/img/%E1%84%89%E1%85%B5%E1%86%BC%E1%84%80%E1%85%B3%E1%86%AF_%E1%84%8F%E1%85%A5%E1%86%AB%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3_%E1%84%8B%E1%85%A6%E1%84%85%E1%85%A5.png)

Uncaught SyntaxError: Lexical declaration cannot appear in a single-statement context

구글링 해도 이해를 못하겄으

8/1 오전

약 이틀만에 다시 열어보니 뭐가 뭐지 읽히질 않는다.

결국 다시 처음부터 시작.

promise .then 문법보다 async await 문법이 더 쉬운 최신 문법이라고 하니 이걸 마저 공부해서 적용시켜봤다.

우리의 인도 유튜버분들 사랑합니다. 이것저것 예시를 보면서 감을 익히고 동작원리도 찾아보며 조금씩 이해해나갔다.

그렇게 리팩토링 성공

![토이프로젝트#01.png](https://github.com/Yupmac/TIL/blob/main/img/%E1%84%90%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A6%E1%86%A8%E1%84%90%E1%85%B3%2301.png)

뭐 기존 코드가 워낙 짧았기에 별 차이 없는거 같아도 그냥 내가 보기에 이 쪽이 더 직관적이어서 만족한다.

한 눈에 들어오니 몰입감이 좋달까? 똑같은거라도 볼 때마다 새로운 나같은 뉴비에게는 이 몰입도 높다는 점이 생각보다 굉장한 장점이다.

8/1 오후

검색창에 키를 입력하고 나서 0.5초가 흐른 후 검색 기능이 작동하게끔 해야한다.

퍼뜩 생각하기로 setTimeout() 메소드가 생각나서 적용시켰다.

그러나 웬걸, 0.5초 후에 작동하는 것은 맞으나 모든 키를 입력한 후 작동하는게 아니라 키 하나 누를 때마다 작동되는 것이었다.

헛웃음이 나오는 상황. 내가 아는 지식 선에서는 답이 나오지 않았고 늘 그렇듯 구글링 해본 결과,

말 그대로 이벤트가 키를 입력할 때마다 작동하기 때문에 이걸 우선 멈춰줘야 한다.

![토이프로젝트#02.png](https://github.com/Yupmac/TIL/blob/main/img/%E1%84%90%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A6%E1%86%A8%E1%84%90%E1%85%B3%2302.png)

clearTimeout() 메소드를 활용하여 잠시 이벤트를 멈춰뒀다가 timeout 이라는 매개변수를 재할당하여 setTimeout() 메소드를 실행시킨다.

이렇게 하면 처음 키를 입력하고 바로 이벤트가 멈추게 되어 비동기 처리하지 않게 되고, 재할당하여 실행된 후 흘러가는 0.5초 사이에 키를 누르게 되면 다시 이벤트가 멈추게 되고, 결과적으로 모든 키를 입력하고 나서야 이벤트가 작동하게 된다.

이거 깨닫고 소리 지름…..

추가로 더 검색하다 보니 검색 기능 만들 때 이건 그냥 기본 세트란다…..

아무튼 이해했다는 것에서 만족.

8/1 밤

희망이라는 뽕을 맞고 각성하여 날을 새고 있다.

‘기능 하나만 더 만들고 자자.’ 마음 속으로 되내이며 힘을 내본다.

배열은 forEach() 메소드로 어떻게 한다던데 도무지 응용이 되질 않는다.

결국 포기하고 원래 생각해뒀던 for 반복문을 이용한 방법으로 빌드업해본다.

![토이프로젝트#03.png](https://github.com/Yupmac/TIL/blob/main/img/%E1%84%90%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A6%E1%86%A8%E1%84%90%E1%85%B3%2303.png)

값을 출력하는건 크게 어렵지 않았다.

인도 유튜버의 도움을 받았기 때문.

먼 타국에 계신 분이 내 과제를 어떻게 알았는지 귀신같이 비슷한 케이스로 영상을 올려놨더군

공부하는 학생 입장에서 영상을 보면서 그대로 베껴오기보다는 최대한 어떤 논리로 이런 로직을 구성했는지를 이해할려 노력했다.

map() 메소드 헷갈려서 찾아보니 map(), filter() 이렇게 두 개 한세트로 많이 쓰길래 둘 다 복습했다.

다만, for문 밖에서 선언해둔 DB 변수가 불러와지지 않는 것이다.

그렇다고 재선언도 안되고 뭘 어쩌라는건지 모르겠는데 위 사진처럼 그냥 한번 더 불러와주기만 해도 문제가 해결되었다.

문제 해결은 됐지만 도대체 어떤 이유로 이렇게 풀린건지는 끝까지 이해하지 못했다.

뒤에 또 무슨 문제가 얼마나 몰려올지 모르니 이건 따로 체크만 해놓고 작전상 넘어가기로 한다.

이거 외에 버튼에 onclick 으로 링크 연결하는 것도 왜 안되지? 수백번한 끝에 [window.open](http://window.open)() 해야하는걸 window.open=() 이라고 잘못 써둔걸 깨달았다. 진짜 오타치는 것도, 그걸 또 발견하지 못하는 내 자신이 너무 짜증난다.

검색어 대소문자 구별하지 않고 검색하는거랑 빈칸일 때 검색되지 않게 하는건 구글링 하니 어렵지 않게 해결했다.

그래서 최종적으로

api 잘 불러왔고, 검색 잘 되고, 0.5초 딜레이도 잘 처리되고, 버튼 누를 시 새탭 링크 연결도 잘 된다.

이제 무한 스크롤, 클립 저장 기능, 검색어 저장 기능만 하면 끝이다.

“무한 스크롤부터 해볼까?” 하며 구글링 하자마자 바로 끔.

이건 밤중에 할만한게 아닐거 같구나. 잠이나 자자.

8/2 오전
무한 스크롤이 문제가 아니었다.

관건은 스크롤을 했을 때 새로운 정보를 불러와서 추가되어야 하는데 새로 불러올 정보를 API에서 찾지 못하고 있었던 것…..

페이지 당 10개씩 제한한다는데 그 페이지란건 그래서 어디에 있는데?

리액트 강의 듣고 응용해보자.

이벤트리스너로 함수 적용

함수 내용은 변수 변경 → url = url + 1

이런식으로 각 페이지별로 url 주소값이 바뀌게 설정해보도록 시도 예정

제발 상상대로 되길

```jsx
배열.map(function(a, i) {
	return (
		<div classNmae="list">
			<h4>{ 배열[i] }</h4>
			<p>2월 17일 발행</p>
		</div>
	)
})

/* i가 0부터 1씩 증가하는 정수를 뜻함.
	 a파라미터가 가르키는 배열[i]가 배열의 길이만큼 반복 출력됨 */

// 이거 써먹어보자.

```

8/2 밤

반복문 아이디어는 실패로 돌아가고 결국 다시 for문으로 회귀함

일단 다음 과제를 해결해보자 하면서 클립 기능 개발로 넘어갔다.

![토이프로젝트#04.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/579034ff-e51b-40e1-b17e-75e373958b3d/%E1%84%90%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A6%E1%86%A8%E1%84%90%E1%85%B304.png)

그러나 한 함수 안에 두 버튼 이벤트를 넣으니 같이 작동하지 않고 한쪽 이벤트는 먹통됨

8/3 오전

난 패배자다.

뭐 하나 제대로 구현한게 없다.

기본적인 검색조차 안된다.

스크롤? 이 안되는데 검색이 될리가 있나.

시간 제한으로 인해 한 것까지 제출하고 괴로워하는중

개같ㅡㄴ…..

8/3 저녁 코드 리뷰 시간

당장 확인된 문제점

- api 키 노출 ! → api키를 다른 js파일로 작성한 후 import하여 활용하고 git push할때는 gitignore 처리하면 됨.
- 스크롤 이벤트 너무 과하게 많이 발생함 - 쓰로틀링 막을 방법 강구할 필요 있음
- innerHTML 로 작업된 부분은 createElement 혹은 appendChild 메소드를 통해 작업하는 것이 성능상 이점이 있음.
- commit은 보통 기능 단위로 진행하는게 좋고, 중간 중간 커밋한 것들은 어떤 커밋을 확인하더라도 동작할 수 있도록 버전관리해주는 것이 좋다. 너무 한번에 커밋, 푸쉬 하려고 하지 말 것.
- html 태그에 직접적으로 onClick 이벤트 작성하지 않는 것을 추천
- 링크 이벤트를 할때는 자바스크립트를 이용해서 직접 태그의 location 을 변경하는 방식은 피해야 한다.
미리보기, 호버같은 css 속성 적용불가하고, 시각 장애인 UI 등에서 불리하기 때문이다.
이럴 때는 a 태그로 버튼을 감싸는 방식으로 활용하도록 하자.

이외에 다른 사용자들의 리뷰를 통한 추가 교훈

- 숫자라 하더라도 여러번 작성되는 상수는 변수로 따로 할당하는 것을 추천. 이후 관리에 용이함.
- font 등을 import 해올 때 모든 유형으로 다 import하면 용량이 커지기에 필요한 내용만 import할 것을 추천
- 수만개의 무수한 이벤트를 처리하는 경우가 아니라면 굳이 복잡하게 이벤트리스너로 작성할 필요 없다. 상황에 맞춰 적용할 수 있도록 보다 명확하게 메소드를 알아두자.
- 참조타입 주소를 통해 접근하는 경우(예를 들어 객체)도 일종의 많은 컴퓨터 메모리를 차지하는 연산이다. 부담이 될 수 있기 때문에 자주 사용된다면 따로 참조타입을 변수에 할당해서 사용하는 방식을 취하도록 하자.
- 최근 추세는 전역 변수를 최대한 줄이는 쪽으로 흘러가고 있다.
- 커링 보다는 클로저 클로저보다는 고차함수 개념에 더 집중 ( 커링 < 클로저 < 고차함수)
